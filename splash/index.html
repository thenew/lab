<html>
<head>
    <meta charset="UTF-8">
    <style>
*,*:before,*:after{box-sizing:border-box}html,body,div,span,object,iframe,h1,h2,h3,h4,h5,h6,p,pre,a,abbr,acronym,address,code,em,img,footer,header,small,strike,strong,sub,sup,ol,ul,li,canvas,menu,nav,section,video,abbr,time,progress{margin:0;padding:0;border:0;font:inherit;font-size:100%;font-weight:inherit;vertical-align:baseline;outline:0;background:transparent no-repeat top left}ol,ul{padding:0;list-style:none}a{text-decoration:none}html{min-height:100%}body{position:relative;min-height:100%;font-family:"Segoe UI",Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif;font-size:62.5%;line-height:1.4;color:#222;background-color:#fff;-webkit-text-size-adjust:none}strong{font-weight:700}svg{display:inline-block;max-height:100%;max-width:100%}svg line,svg use,svg path{fill:inherit}img,video{max-width:100%}.clearfix:before,.clearfix:after{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}

body {
    padding:0;
    margin:0;
    background: #efefef;
    background: #191028;
    color: #633487;
    color: #dc534b;
    text-align: center;
    cursor: none;
}
#canvas {
    position: absolute;
    z-index: 2;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}

.text {
    position: relative;
    z-index: 2;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    align-content: center;

}

.list {
    display: block;
    margin: auto;
    list-style: none;
    font-size: 40px;
    font-family: 'Arial', sans-serif;
    text-transform: uppercase;
    font-weight: bold;
    color: #F9F9F9;
    color: #633487;
    color: #dc534b;
}

.list {
    position: absolute;
    top: 10%;
    right: 10%;
    bottom: 10%;
    left: 10%;
}

.list .item {
    position: absolute;
}

a {
    text-decoration: none;
    color: inherit;
}
/*
#container {
    width: 800px;
    height: 800px;
    background: #ffffff;
    margin: 10px auto;
}

#canvas {
    width: 800px;
    height: 800px;
}*/
    </style>
</head>
<body>
    <div id="container">
      <canvas id="canvas"></canvas>
      <div class="text">
          <ul class="list">
              <li class="item"><a href="#about">Lorem iptioms</a></li>
              <li class="item"><a href="#works">Ipsum dororl</a></li>
              <li class="item"><a href="#works">Ipsum dororl</a></li>
          </ul>
      </div>
    </div>
    <script>
// Returns a random integer between min (included) and max (included)
// Using Math.round() will give you a non-uniform distribution!
function rand(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}


var canvas = document.getElementById("canvas"),
    context = canvas.getContext("2d");

// context.translate(0.5, 0.5);
context.imageSmoothingEnabled= false;

canvas.width  = document.body.offsetWidth;
canvas.height = document.body.offsetHeight;

window.addEventListener('resize', function viewportResize() {
    canvas.width  = document.body.offsetWidth;
    canvas.height = document.body.offsetHeight;
});

var mouseX = canvas.width/2;
var mouseY = canvas.height/2;

window.addEventListener('mousemove', function(e) {
    mouseX = e.x;
    mouseY = e.y;
});



//update and animate the screen
var FPS = 60;
setInterval(function() {
  draw();
}, 1000/FPS);

var dy = 20,
    blocks = [],
    blocksX = [],
    blocksDescending = [],
    blocksScaling = [],
    minWait = 500,
    lastTime = +new Date();

// circle
var circleRadius = 0;
var circleRadiusEnd = 100;
var circleRadius2 = circleRadiusEnd;
var circleRadiusBorder = 4;
var circleAlpha = 0;
var squatX = 0;
var lastgap = 0;

function Block(x,y,width,height){
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
}

Block.prototype.update = function(){
    if(this.height < canvas.height){
        this.height+=dy;
    }else if(this.height > canvas.height){
        this.height = canvas.height;
    }else{
        // this.height = 0;
    }
};

Block.prototype.render = function(){
    // this.y = 0;
    context.fillStyle="#dc534b";
    context.fillRect(this.x, this.y, this.width, this.height);
};

var generateBlockScaling = function(){
    var blockX = Math.floor( Math.random() * canvas.width );
    var blockW = Math.floor( Math.random() * (5-4) + 4 );
    var block = new Block( blockX, 0, blockW, 0 );

    context.fillStyle="#dc534b";
    context.fillRect(blockX, 0, blockW, canvas.height);

    blocksScaling.push( block );

    return block;
};

var generateBlock = function(){
    // var blockX = Math.floor( Math.random() * canvas.width );
    // while(blocksX.indexOf(blockX) != -1) {
    //     blockX = Math.floor( Math.random() * canvas.width );
    // }

    var gap = rand(0,3);
    // plus souvent 1 que 0
    if(gap) {
        gap = 1;
    }
    if(lastgap == 0) {
        gap = 1;
    }

    lastgap = gap;

    var blockX = squatX + gap;

    var blockW = Math.floor( Math.random() * (5-4) + 4 );
    if(gap == 0) {
        blockW = 2;
    }

    blocksX.push(blockX);
    var block = new Block( blockX, 0, blockW, canvas.height );
    // block.render();

    context.fillStyle="#dc534b";
    context.fillRect(blockX, 0, blockW, canvas.height);

    squatX = blockX+blockW;


    blocks.push( block );

    return block;
};

Block.prototype.anim = function(){
    if(this.y < canvas.height){
        this.y+=dy
    }else{
    }
};

var clearCircle = function (x, y, radius, alpha) {
    context.save();
    context.globalAlpha = alpha;
    context.globalCompositeOperation = 'destination-out';
    context.beginPath();
    context.arc(x, y, radius, 0, 2 * Math.PI, false);
    // context.fillStyle="#000";
    context.fill();
    context.restore();
};

//draw the screen
function draw() {
    if(+new Date() > lastTime + minWait){
        lastTime = +new Date();
        // if(blocks.length < 200) {
        //     blocksX.push(blockX);
        //     blocks.push( new Block( blockX, 0, blockW, 0 ) );
        // }

        // add a descding block
        var key = Math.floor(Math.random() * blocks.length);
        blocksDescending.push(blocks[key]);

        // add a scaling block
        generateBlockScaling();

    }

    context.clearRect(0, 0, canvas.width, canvas.height);

    blocksScaling.forEach(function(e, i){

        if(e.height >= canvas.height) {
            console.log('i : ', i);
            if(i != -1) {
                blocksScaling.splice(i, 1);
            }
            blocks.push(e);
        } else {
            e.update();
            e.render();
        }
    });

    blocksDescending.forEach(function(e, i){

        // remove
        if(e.y > canvas.height) {
            if(i != -1) {
                blocksDescending.splice(i, 1);
            }
        }
        e.anim();
        e.render();
    });


    blocks.forEach(function(e){
        e.update();
        e.render();
    });

    // draw circle

    // increase alpha
    if(circleAlpha < 1) {
        circleAlpha += 0.04;
    }
    if(circleRadius < circleRadiusEnd) {
        circleRadius += 2;
    }
    clearCircle(mouseX, mouseY, circleRadius, circleAlpha);
    if(circleRadius >= circleRadiusEnd) {
        if(circleRadius2 < circleRadiusEnd+circleRadiusBorder) {
            circleRadius2 += 2;
        }
        clearCircle(mouseX, mouseY, circleRadius2, circleAlpha-0.5);
    }
};

// init
for (var i = canvas.width/2; i >= 0; i--) {
    var block = generateBlock();
};





    </script>


    <script>
var items = document.querySelectorAll('.item');
var leftRight = ['left', 'right'];
items[0].style.top = 0;
items[0].style[leftRight[rand(0,1)]] = rand(0,75) + '%';

items[1].style.top = '50%';
items[1].style[leftRight[rand(0,1)]] = rand(0,75) + '%';

items[2].style.bottom = 0;
items[2].style[leftRight[rand(0,1)]] = rand(0,75) + '%';
    </script>
</body>
</html>